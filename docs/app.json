[{"name":"app.R","content":"library(shiny)\nlibrary(bslib)\nlibrary(ggplot2)\nlibrary(readr)\n\nui <- page_sidebar(\n  title = \"Visualisation de données\",\n  sidebar = sidebar(\n    # Upload du fichier\n    fileInput(\"file\", \"Choisir un fichier CSV\",\n              accept = c(\"text/csv\",\n                         \"text/comma-separated-values,text/plain\",\n                         \".csv\")),\n\n    # Sélection de la variable (apparaît uniquement après chargement du fichier)\n    uiOutput(\"var_select\")\n  ),\n\n  # Zone principale avec le graphique\n  card(\n    plotOutput(\"plot\")\n  )\n)\n\nserver <- function(input, output, session) {\n  # Lecture réactive du fichier avec point-virgule comme séparateur\n  data <- reactive({\n    req(input$file)\n    read_csv2(input$file$datapath)  # read_csv2 utilise ; comme séparateur\n  })\n\n  # UI dynamique pour sélectionner la variable\n  output$var_select <- renderUI({\n    req(data())\n    selectInput(\"variable\", \"Choisir une variable à visualiser\",\n                choices = names(data()))\n  })\n\n  # Création du graphique\n  output$plot <- renderPlot({\n    req(input$variable)\n\n    # Récupération du type de la variable sélectionnée\n    var_type <- class(data()[[input$variable]])[1]\n\n    # Création du graphique selon le type de variable\n    if (var_type %in% c(\"numeric\", \"integer\", \"double\")) {\n      # Pour les variables numériques : boxplot\n      ggplot(data(), aes_string(y = input$variable)) +\n        geom_boxplot(fill = \"lightblue\", color = \"darkblue\") +\n        theme_minimal() +\n        labs(title = paste(\"Distribution de\", input$variable),\n             y = input$variable)\n    } else {\n      # Pour les variables catégorielles : diagramme en barres\n      ggplot(data(), aes_string(x = input$variable)) +\n        geom_bar(fill = \"lightblue\") +\n        theme_minimal() +\n        theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n        labs(title = paste(\"Distribution de\", input$variable),\n             x = input$variable,\n             y = \"Fréquence\")\n    }\n  })\n}\n\nshinyApp(ui, server)\n","type":"text"}]
